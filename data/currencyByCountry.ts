import * as R from "ramda";

enum CurrencyCode {
  GBP = "GBP",
  EUR = "EUR",
  CAD = "CAD",
  AUD = "AUD",
  NZD = "NZD",
  USD = "USD",
}

const countryCodeAndNames: Record<string, string> = {
  GB: "United Kingdom",
  AT: "Austria",
  BE: "Belgium",
  FI: "Finland",
  FR: "France",
  DE: "Germany",
  GR: "Greece",
  IT: "Italy",
  LT: "Lithuania",
  NL: "Netherlands",
  PT: "Portugal",
  SK: "Slovakia",
  SI: "Slovenia",
  ES: "Spain",
  CA: "Canada",
  AU: "Australia",
  NZ: "New Zealand",
  US: "United States",
  CN: "China",
  IN: "India",
  ID: "Indonesia",
  PK: "Pakistan",
  BR: "Brazil",
  NG: "Nigeria",
  BD: "Bangladesh",
  RU: "Russia",
  MX: "Mexico",
  JP: "Japan",
  ET: "Ethiopia",
  PH: "Philippines",
  EG: "Egypt",
  TR: "Turkey",
  IR: "Iran",
  TH: "Thailand",
  TZ: "Tanzania",
  ZA: "South Africa",
  MM: "Myanmar",
  KE: "Kenya",
  CO: "Colombia",
  UG: "Uganda",
  AR: "Argentina",
  DZ: "Algeria",
  SD: "Sudan",
  UA: "Ukraine",
  IQ: "Iraq",
  AF: "Afghanistan",
  PL: "Poland",
  MA: "Morocco",
  SA: "Saudi Arabia",
  UZ: "Uzbekistan",
  PE: "Peru",
  AO: "Angola",
  MY: "Malaysia",
  MZ: "Mozambique",
  GH: "Ghana",
  YE: "Yemen",
  NP: "Nepal",
  VE: "Venezuela",
  MG: "Madagascar",
  CM: "Cameroon",
  NE: "Niger",
  TW: "Taiwan",
  LK: "Sri Lanka",
  BF: "Burkina Faso",
  ML: "Mali",
  RO: "Romania",
  MW: "Malawi",
  CL: "Chile",
  KZ: "Kazakhstan",
  ZM: "Zambia",
  GT: "Guatemala",
  EC: "Ecuador",
  SY: "Syria",
  SN: "Senegal",
  KH: "Cambodia",
  TD: "Chad",
  SO: "Somalia",
  ZW: "Zimbabwe",
  GN: "Guinea",
  RW: "Rwanda",
  BJ: "Benin",
  BI: "Burundi",
  TN: "Tunisia",
  BO: "Bolivia",
  HT: "Haiti",
  CU: "Cuba",
  SS: "South Sudan",
  DO: "Dominican Republic",
  JO: "Jordan",
  AZ: "Azerbaijan",
  SE: "Sweden",
  HN: "Honduras",
  AE: "United Arab Emirates",
  HU: "Hungary",
  BY: "Belarus",
  PG: "Papua New Guinea",
  RS: "Serbia",
  IL: "Israel",
  CH: "Switzerland",
  TG: "Togo",
  SL: "Sierra Leone",
  PY: "Paraguay",
  BG: "Bulgaria",
  LY: "Libya",
  LB: "Lebanon",
  NI: "Nicaragua",
  KG: "Kyrgyzstan",
  SV: "El Salvador",
  TM: "Turkmenistan",
  SG: "Singapore",
  DK: "Denmark",
  CD: "Democratic Republic of the Congo",
  NO: "Norway",
  OM: "Oman",
  CR: "Costa Rica",
  LR: "Liberia",
  CF: "Central African Republic",
  MR: "Mauritania",
  PA: "Panama",
  KW: "Kuwait",
  HR: "Croatia",
  MD: "Moldova",
  GE: "Georgia",
  ER: "Eritrea",
  UY: "Uruguay",
  BA: "Bosnia and Herzegovina",
  MN: "Mongolia",
  AM: "Armenia",
  JM: "Jamaica",
  QA: "Qatar",
  AL: "Albania",
  NA: "Namibia",
  GM: "Gambia",
  BW: "Botswana",
  GA: "Gabon",
  LS: "Lesotho",
  GW: "Guinea-Bissau",
};

type Country = string;

const countryCurrencies: Record<CurrencyCode, Country[]> = {
  [CurrencyCode.GBP]: ["GB"],
  [CurrencyCode.EUR]: [
    "AT",
    "BE",
    "FI",
    "FR",
    "DE",
    "GR",
    "IT",
    "LT",
    "NL",
    "PT",
    "SK",
    "SI",
    "ES",
  ],
  [CurrencyCode.CAD]: ["CA"],
  [CurrencyCode.AUD]: ["AU"],
  [CurrencyCode.NZD]: ["NZ"],
  [CurrencyCode.USD]: [
    "US",
    "CN",
    "IN",
    "ID",
    "PK",
    "BR",
    "NG",
    "BD",
    "RU",
    "MX",
    "JP",
    "ET",
    "PH",
    "EG",
    "TR",
    "IR",
    "TH",
    "TZ",
    "ZA",
    "MM",
    "KE",
    "CO",
    "UG",
    "AR",
    "DZ",
    "SD",
    "UA",
    "IQ",
    "AF",
    "PL",
    "MA",
    "SA",
    "UZ",
    "PE",
    "AO",
    "MY",
    "MZ",
    "GH",
    "YE",
    "NP",
    "VE",
    "MG",
    "CM",
    "NE",
    "TW",
    "LK",
    "BF",
    "ML",
    "RO",
    "MW",
    "CL",
    "KZ",
    "ZM",
    "GT",
    "EC",
    "SY",
    "SN",
    "KH",
    "TD",
    "SO",
    "ZW",
    "GN",
    "RW",
    "BJ",
    "BI",
    "TN",
    "BO",
    "HT",
    "CU",
    "SS",
    "DO",
    "JO",
    "AZ",
    "SE",
    "HN",
    "AE",
    "HU",
    "BY",
    "PG",
    "RS",
    "IL",
    "CH",
    "TG",
    "SL",
    "PY",
    "BG",
    "LY",
    "LB",
    "NI",
    "KG",
    "SV",
    "TM",
    "SG",
    "DK",
    "CD",
    "NO",
    "OM",
    "CR",
    "LR",
    "GB",
    "CF",
    "MR",
    "PA",
    "KW",
    "HR",
    "MD",
    "GE",
    "ER",
    "UY",
    "BA",
    "MN",
    "AM",
    "JM",
    "QA",
    "AL",
    "NA",
    "GM",
    "BW",
    "GA",
    "LS",
    "GW",
  ],
};

const countries = R.keys(countryCodeAndNames);

const currencyByCountry = R.pipe(
  // Transform {[CurrencyCode]: Country[]} into an array of [CurrencyCode, Country[]]
  // @ts-ignore
  R.toPairs,
  // Flip the array from [CurrencyCode, Country[]] to [Country, CurrencyCode]
  R.reduce((accum, [currency, countries]: [CurrencyCode, Country[]]) => {
    const countryCurrencyPairs = R.zip(
      countries,
      R.repeat(currency, R.length(countries))
    );
    return [...accum, ...countryCurrencyPairs];
  }, [] as [Country, CurrencyCode][]),
  // Go back to {[Country]: CurrencyCode} from [Country, CurrencyCode]
  R.fromPairs
  // @ts-ignore
)(countryCurrencies) as Record<Country, CurrencyCode>;

export { CurrencyCode, countryCodeAndNames, countries, currencyByCountry };
